import{a as c,i as d}from"./assets/vendor-BfXKUa_G.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();const i={deliveryForm:document.querySelector(".deliveries-form-js"),deliveryNumber:document.querySelector(".delivery-no-number"),deliveryNumberYear:document.querySelector(".delivery-no-year"),deliveriesDate:document.querySelector(".deliveries-form-date-js"),fullDeliveryNo:document.querySelector(".full-delivery-no-js"),recipientName:document.querySelector(".recipient-name-user-login"),userDeliveryDescr:document.querySelector(".delivery-descr-js"),deleteDeliveryForm:document.querySelector(".delete-delivery-form-js"),tableBody:document.querySelector(".deliveries-table-body"),incShipID:document.querySelector(".inc-ship-id"),updateDeliveryBtn:document.querySelector(".update-delivery-btn"),updateDeliveryOverlay:document.querySelector(".update-delivery-overlay"),modalWindowCloseBtn:document.querySelector(".modal-window-close-btn"),tableBody:document.querySelector(".deliveries-table-body"),deliveriesTime:document.querySelector(".deliveries-form-time-js"),updateDeliverySelect:document.querySelector(".update-delivery-select-js"),inputContainer:document.querySelector(".input-container"),updateDeliveryForm:document.querySelector(".modal-update-delivery-form-js")},N=()=>{const e=new Date,r=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${t}-${r}`},S=()=>{setInterval(()=>{const e=new Date,r=String(e.getHours()).padStart(2,"0"),t=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");i.deliveriesTime.textContent=`${r}:${t}:${s}`},1e3)},u="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",f=e=>c.post(u,e).then(()=>{d.success({title:"Dodano dostawę!",position:"topRight",timeout:7e3})}).catch(r=>{d.error({message:r,position:"topRight",timeout:7e3})}),h=e=>c.delete(`${u}/${e}`).then(r=>{d.success({message:"Dostawa usunięta",position:"topRight",timeout:7e3}),console.log(r)}).catch(r=>{d.error({message:r,position:"topRight",timeout:7e3})}),l=()=>c.get(u),x=(e,r)=>c.put(`${u}/${r}`,e).then(t=>{d.success({message:"Korekta zrobiona",position:"topRight",timeout:7e3}),console.log(t)}).catch(t=>console.log(t)),C={updateSupplier:"dostawca",updateAbroad:"zagranica",updateCarrier:"Przewożnik",updateDeliveryNumber:"Numer dostawy",updateDeliveryDescr:"Opis dostawy",updateIncomingShipmentID:"incoming shipment id",updatePallets:"palety",updateBoxes:"kartony",updatePieces:"sztuki",updateShipingNoteNumber:"numer listu przesyłki",updateAdmissionDate:"data przyjęcia",updateAdmissionTime:"godzina przyjęcia",updateInvoiceNumber:"numer faktury",updateComments:"uwagi"},w={updateSupplier:"text",updateAbroad:"text",updateCarrier:"text",updateDeliveryNumber:"text",updateDeliveryDescr:"text",updateIncomingShipmentID:"number",updatePallets:"number",updateBoxes:"number",updatePieces:"number",updateShipingNoteNumber:"text",updateAdmissionDate:"text",updateAdmissionTime:"text",updateInvoiceNumber:"text",updateComments:"text"},m=e=>{const r=e.map(t=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${t.id}</td>
            <td class="deliveries-table-body-text">${t.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${t.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${t.supplier}</td>
            <td class="deliveries-table-body-text">${t.carrier}</td>
            <td class="deliveries-table-body-text">${t.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${t.pallets}</td>
            <td class="deliveries-table-body-text">${t.boxes}</td>
            <td class="deliveries-table-body-text">${t.pieces}</td>
            <td class="deliveries-table-body-text">${t.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${t.admissionDate}</td>
            <td class="deliveries-table-body-text">${t.admissionTime}</td>
            <td class="deliveries-table-body-text">${t.recipientFullName}</td>
            <td class="deliveries-table-body-text">${t.abroad}</td>
            <td class="deliveries-table-body-text">${t.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${t.comments}</td>
        </tr>
    `).join("");i.tableBody.insertAdjacentHTML("beforeend",r)},L=e=>{const r=document.createElement("input"),t=document.createElement("label");t.htmlFor=e,t.className="deliveries-form-label",t.textContent=C[e]||e,r.type=w[e]||e,r.name=e,r.id=e,r.placeholder="Wprowadź nowe dane",r.className="deliveries-form-input",i.inputContainer.appendChild(t),i.inputContainer.appendChild(r)};document.addEventListener("DOMContentLoaded",async()=>{try{const{data:e}=await l();m(e);const r=e[e.length-1].deliveryNumber,[t,s,a]=r.split("/"),o=String(Number(t)+1).padStart(4,"0");i.deliveryNumber.textContent=o}catch(e){console.log(e)}});const y=new Date().getFullYear();i.deliveryNumberYear.textContent=y;i.deliveriesDate.textContent=`${N()}`;S();i.userDeliveryDescr.addEventListener("input",()=>{const e=i.userDeliveryDescr.value.trim().toUpperCase();e.includes("TERMINALE_INGENICO_")&&(i.incShipID.disabled=!1),e==="TERMINALE_INGENICO_ZWROT"&&(i.incShipID.disabled=!0)});const $=async e=>{try{e.preventDefault();const{data:r}=await l(),t=r[r.length-1].deliveryNumber,[s,a,o]=t.split("/"),n=`${String(Number(s)+1).padStart(4,"0")}/${y}/D`,b={supplier:e.target.elements.supplier.value.trim().toLowerCase(),abroad:e.target.elements.abroad.value.trim().toLowerCase(),carrier:e.target.elements.carrier.value.trim().toLowerCase(),deliveryNumber:n,deliveryDescr:e.target.elements["delivery-descr"].value.trim().toLowerCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toLowerCase(),admissionDate:i.deliveriesDate.textContent,admissionTime:i.deliveriesTime.textContent,recipientFullName:i.recipientName.textContent.toLowerCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toLowerCase(),comments:e.target.elements.comments.value.trim().toLowerCase()};await f(b);const{data:p}=await l();i.tableBody.innerHTML="",m(p);const v=p[p.length-1].deliveryNumber,[D,F,q]=v.split("/"),g=String(Number(D)+1).padStart(4,"0");i.deliveryNumber.textContent=g,i.incShipID.disabled=!0,i.deliveryForm.reset()}catch(r){console.log(r)}},I=async e=>{try{e.preventDefault();const r=e.target.elements["delivery-id"].value;h(r),i.tableBody.innerHTML="";const{data:t}=await l();m(t),i.deleteDeliveryForm.reset()}catch(r){console.log(r)}},E=e=>{const r=e.target.value;r&&L(r)},T=async e=>{try{e.preventDefault();const r=new FormData(e.target),t={};r.forEach((o,n)=>{t[n]=o});const s={supplier:t.updateSupplier,abroad:t.updateAbroad,carrier:t.updateCarrier,deliveryNumber:t.updateDeliveryNumber,deliveryDescr:t.updateDeliveryDescr,incomingShipmentID:t.updateIncomingShipmentID,pallets:t.updatePallets,boxes:t.updateBoxes,pieces:t.updatePieces,shipingNoteNumber:t.updateShipingNoteNumber,admissionDate:t.updateAdmissionDate,admissionTime:t.updateAdmissionTime,invoiceNumber:t.updateInvoiceNumber,comments:t.updateComments};await x(s,t["update-delivery-id"]),i.tableBody.innerHTML="";const{data:a}=await l();m(a),i.updateDeliveryOverlay.classList.toggle("is-open"),i.inputContainer.innerHTML="",i.updateDeliveryForm.reset()}catch(r){console.log(r)}};i.deliveryForm.addEventListener("submit",$);i.deleteDeliveryForm.addEventListener("submit",I);i.updateDeliveryBtn.addEventListener("click",()=>{i.updateDeliveryOverlay.classList.toggle("is-open")});i.modalWindowCloseBtn.addEventListener("click",()=>{i.updateDeliveryOverlay.classList.toggle("is-open")});i.updateDeliverySelect.addEventListener("change",E);i.updateDeliveryForm.addEventListener("submit",T);
//# sourceMappingURL=index.js.map
