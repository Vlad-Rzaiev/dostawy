import{a as c,i}from"./assets/vendor-4yCzdkXl.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const m=document.querySelector(".deliveries-form-time-js"),v=()=>{const e=new Date,s=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${s}-${r}-${t}`},f=()=>{setInterval(()=>{const e=new Date,s=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),t=String(e.getSeconds()).padStart(2,"0");m.textContent=`${s}:${r}:${t}`},1e3)},d="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",h=async e=>{try{return(await c.post(d,e)).data}catch(s){console.log(s)}},x=async e=>{try{return await c.delete(`${d}/${e}`)}catch(s){console.log(s)}},l=async()=>{try{return await c.get(d)}catch(e){console.log(e)}},p=e=>{const s=document.querySelector(".deliveries-table-body"),r=e.map(t=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${t.id}</td>
            <td class="deliveries-table-body-text">${t.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${t.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${t.supplier}</td>
            <td class="deliveries-table-body-text">${t.carrier}</td>
            <td class="deliveries-table-body-text">${t.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${t.pallets}</td>
            <td class="deliveries-table-body-text">${t.boxes}</td>
            <td class="deliveries-table-body-text">${t.pieces}</td>
            <td class="deliveries-table-body-text">${t.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${t.admissionDate}</td>
            <td class="deliveries-table-body-text">${t.admissionTime}</td>
            <td class="deliveries-table-body-text">${t.recipientFullName}</td>
            <td class="deliveries-table-body-text">${t.abroad}</td>
            <td class="deliveries-table-body-text">${t.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${t.comments}</td>
        </tr>
    `).join("");s.insertAdjacentHTML("beforeend",r)},b=document.querySelector(".deliveries-form-js"),u=document.querySelector(".delivery-no-number"),D=document.querySelector(".delivery-no-year"),g=document.querySelector(".deliveries-form-date-js"),S=document.querySelector(".full-delivery-no-js"),$=document.querySelector(".recipient-name-user-login"),y=document.querySelector(".delete-delivery-form-js");document.addEventListener("DOMContentLoaded",()=>{setInterval(()=>{l().then(e=>{if(e.data.length===0){u.textContent="0001";return}else{const s=e.data,r=s[s.length-1].deliveryNumber,[t,o,n]=r.split("/"),a=String(Number(t)+1).padStart(4,"0");u.textContent=a}}).catch(e=>{console.log(e)})},5e3),l().then(e=>{p(e.data)}).catch(e=>{console.log(e)})});D.textContent=new Date().getFullYear();g.textContent=`${v()}`;f();const C=e=>{e.preventDefault();const s={supplier:e.target.elements.supplier.value.trim().toUpperCase(),abroad:e.target.elements.abroad.value.trim().toUpperCase(),carrier:e.target.elements.carrier.value.trim().toUpperCase(),deliveryNumber:S.textContent.trim(),deliveryDescr:e.target.elements["delivery-descr"].value.trim().toUpperCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toUpperCase(),admissionDate:g.textContent,admissionTime:m.textContent,recipientFullName:$.textContent.toUpperCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toUpperCase(),comments:e.target.elements.comments.value.trim().toUpperCase()};h(s).then(r=>{i.success({message:"Dodano dostawę!",position:"topRight"}),console.log(r)}).catch(r=>{i.error({message:r,position:"topRight"})}),l().then(r=>{p(r.data)}).catch(r=>{console.log(r)}),b.reset()},N=e=>{e.preventDefault();const s=e.target.elements["delivery-id"].value;x(s).then(r=>{i.success({message:"Dostawa usunięta",position:"topRight"})}).catch(r=>{i.error({message:r,position:"topRight"})}),y.reset()};b.addEventListener("submit",C);y.addEventListener("submit",N);
//# sourceMappingURL=index.js.map
