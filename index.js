import{a as l,i as d}from"./assets/vendor-BfXKUa_G.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const i={deliveryForm:document.querySelector(".deliveries-form-js"),deliveryNumber:document.querySelector(".delivery-no-number"),deliveryNumberYear:document.querySelector(".delivery-no-year"),deliveriesDate:document.querySelector(".deliveries-form-date-js"),fullDeliveryNo:document.querySelector(".full-delivery-no-js"),recipientName:document.querySelector(".recipient-name-user-login"),userDeliveryDescr:document.querySelector(".delivery-descr-js"),deleteDeliveryForm:document.querySelector(".delete-delivery-form-js"),tableBody:document.querySelector(".deliveries-table-body"),incShipID:document.querySelector(".inc-ship-id"),updateDeliveryBtn:document.querySelector(".update-delivery-btn"),updateDeliveryOverlay:document.querySelector(".update-delivery-overlay"),modalWindowCloseBtn:document.querySelector(".modal-window-close-btn"),tableBody:document.querySelector(".deliveries-table-body"),deliveriesTime:document.querySelector(".deliveries-form-time-js"),updateDeliverySelect:document.querySelector(".update-delivery-select-js"),inputContainer:document.querySelector(".input-container"),updateDeliveryForm:document.querySelector(".modal-update-delivery-form-js"),moreShipingNoteBtn:document.querySelector(".js-more-shiping-note-btn")},N=()=>{const e=new Date,r=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${t}-${r}`},f=()=>{setInterval(()=>{const e=new Date,r=String(e.getHours()).padStart(2,"0"),t=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");i.deliveriesTime.textContent=`${r}:${t}:${o}`},1e3)},c="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",x=e=>l.post(c,e).then(()=>{d.success({title:"Dodano dostawę!",position:"topRight",timeout:7e3})}).catch(r=>{d.error({message:r,position:"topRight",timeout:7e3})}),w=e=>l.delete(`${c}/${e}`).then(r=>{d.success({message:"Dostawa usunięta",position:"topRight",timeout:7e3}),console.log(r)}).catch(r=>{d.error({message:r,position:"topRight",timeout:7e3})}),C=(e,r)=>l.put(`${c}/${r}`,e).then(t=>{d.success({message:"Korekta zrobiona",position:"topRight",timeout:7e3}),console.log(t)}).catch(t=>console.log(t)),p=()=>l.get(c),u=()=>{const e=new URL("https://6788090fc4a42c9161091efe.mockapi.io/deliveries");return e.searchParams.append("sortBy","deliveryNumber"),e.searchParams.append("order","desc"),e.searchParams.append("page",1),e.searchParams.append("limit",12),l.get(e)},L={updateSupplier:"dostawca",updateAbroad:"zagranica",updateCarrier:"Przewożnik",updateDeliveryNumber:"Numer dostawy",updateDeliveryDescr:"Opis dostawy",updateIncomingShipmentID:"incoming shipment id",updatePallets:"palety",updateBoxes:"kartony",updatePieces:"sztuki",updateShipingNoteNumber:"numer listu przesyłki",updateAdmissionDate:"data przyjęcia",updateAdmissionTime:"godzina przyjęcia",updateInvoiceNumber:"numer faktury",updateComments:"uwagi"},I={updateSupplier:"text",updateAbroad:"text",updateCarrier:"text",updateDeliveryNumber:"text",updateDeliveryDescr:"text",updateIncomingShipmentID:"number",updatePallets:"number",updateBoxes:"number",updatePieces:"number",updateShipingNoteNumber:"text",updateAdmissionDate:"text",updateAdmissionTime:"text",updateInvoiceNumber:"text",updateComments:"text"},m=e=>{const r=e.map(t=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${t.id}</td>
            <td class="deliveries-table-body-text">${t.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${t.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${t.supplier}</td>
            <td class="deliveries-table-body-text">${t.carrier}</td>
            <td class="deliveries-table-body-text">${t.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${t.pallets}</td>
            <td class="deliveries-table-body-text">${t.boxes}</td>
            <td class="deliveries-table-body-text">${t.pieces}</td>
            <td class="deliveries-table-body-text">${t.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${t.admissionDate}</td>
            <td class="deliveries-table-body-text">${t.admissionTime}</td>
            <td class="deliveries-table-body-text">${t.recipientFullName}</td>
            <td class="deliveries-table-body-text">${t.abroad}</td>
            <td class="deliveries-table-body-text">${t.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${t.comments}</td>
        </tr>
    `).join("");i.tableBody.insertAdjacentHTML("beforeend",r)},$=e=>{const r=document.createElement("input"),t=document.createElement("label");t.htmlFor=e,t.className="deliveries-form-label",t.textContent=L[e]||e,r.type=I[e]||e,r.name=e,r.id=e,r.placeholder="Wprowadź nowe dane",r.className="deliveries-form-input",i.inputContainer.appendChild(t),i.inputContainer.appendChild(r)};document.addEventListener("DOMContentLoaded",async()=>{try{const{data:e}=await p(),r=e[e.length-1].deliveryNumber,[t,o,a]=r.split("/"),s=String(Number(t)+1).padStart(4,"0");i.deliveryNumber.textContent=s;const n=await u();i.tableBody.innerHTML="",m(n.data)}catch(e){console.log(e)}});const b=new Date().getFullYear();i.deliveryNumberYear.textContent=b;i.deliveriesDate.textContent=`${N()}`;f();i.userDeliveryDescr.addEventListener("input",()=>{const e=i.userDeliveryDescr.value.trim().toUpperCase();e.includes("TERMINALE_INGENICO_")?i.incShipID.disabled=!1:i.incShipID.disabled=!0,e==="TERMINALE_INGENICO_ZWROT"&&(i.incShipID.disabled=!0)});const T=async e=>{try{e.preventDefault();const{data:r}=await p(),t=r[r.length-1].deliveryNumber,[o,a,s]=t.split("/"),n=`${String(Number(o)+1).padStart(4,"0")}/${b}/D`,v={supplier:e.target.elements.supplier.value.trim().toLowerCase(),abroad:e.target.elements.abroad.value.trim().toLowerCase(),carrier:e.target.elements.carrier.value.trim().toLowerCase(),deliveryNumber:n,deliveryDescr:e.target.elements["delivery-descr"].value.trim().toLowerCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toLowerCase(),admissionDate:i.deliveriesDate.textContent,admissionTime:i.deliveriesTime.textContent,recipientFullName:i.recipientName.textContent.toLowerCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toLowerCase(),comments:e.target.elements.comments.value.trim().toLowerCase()};await x(v);const{data:y}=await p(),g=y[y.length-1].deliveryNumber,[D,B,P]=g.split("/"),S=String(Number(D)+1).padStart(4,"0");i.deliveryNumber.textContent=S,i.incShipID.disabled=!0;const h=await u();i.tableBody.innerHTML="",m(h.data),i.deliveryForm.reset()}catch(r){console.log(r)}},E=async e=>{try{e.preventDefault();const r=e.target.elements["delivery-id"].value;await w(r);const{data:t}=await u();i.tableBody.innerHTML="",m(t),i.deleteDeliveryForm.reset()}catch(r){console.log(r)}},F=e=>{const r=e.target.value;r&&$(r);function t(){i.updateDeliverySelect.value="",i.updateDeliverySelect.selectedIndex=0}setTimeout(t,500)},q=async e=>{try{e.preventDefault();const r=new FormData(e.target),t={};r.forEach((s,n)=>{t[n]=s});const o={supplier:t.updateSupplier,abroad:t.updateAbroad,carrier:t.updateCarrier,deliveryNumber:t.updateDeliveryNumber,deliveryDescr:t.updateDeliveryDescr,incomingShipmentID:t.updateIncomingShipmentID,pallets:t.updatePallets,boxes:t.updateBoxes,pieces:t.updatePieces,shipingNoteNumber:t.updateShipingNoteNumber,admissionDate:t.updateAdmissionDate,admissionTime:t.updateAdmissionTime,invoiceNumber:t.updateInvoiceNumber,comments:t.updateComments};await C(o,t["update-delivery-id"]),i.tableBody.innerHTML="";const{data:a}=await u();m(a),i.updateDeliveryOverlay.classList.toggle("is-open"),i.inputContainer.innerHTML="",i.updateDeliveryForm.reset()}catch(r){console.log(r)}};i.deliveryForm.addEventListener("submit",T);i.deleteDeliveryForm.addEventListener("submit",E);i.updateDeliveryBtn.addEventListener("click",()=>i.updateDeliveryOverlay.classList.toggle("is-open"));i.modalWindowCloseBtn.addEventListener("click",()=>i.updateDeliveryOverlay.classList.toggle("is-open"));i.updateDeliverySelect.addEventListener("change",F);i.updateDeliveryForm.addEventListener("submit",q);i.moreShipingNoteBtn.addEventListener("click",()=>{console.log("hello")});
//# sourceMappingURL=index.js.map
