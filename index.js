import{a as l,i as a}from"./assets/vendor-BfXKUa_G.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const o={deliveryForm:document.querySelector(".deliveries-form-js"),deliveryNumber:document.querySelector(".delivery-no-number"),deliveryNumberYear:document.querySelector(".delivery-no-year"),deliveriesDate:document.querySelector(".deliveries-form-date-js"),fullDeliveryNo:document.querySelector(".full-delivery-no-js"),recipientName:document.querySelector(".recipient-name-user-login"),userDeliveryDescr:document.querySelector(".delivery-descr-js"),deleteDeliveryForm:document.querySelector(".delete-delivery-form-js"),tableBody:document.querySelector(".deliveries-table-body"),incShipID:document.querySelector(".inc-ship-id"),updateDeliveryBtn:document.querySelector(".update-delivery-btn"),updateDeliveryOverlay:document.querySelector(".update-delivery-overlay"),modalWindowCloseBtn:document.querySelector(".modal-window-close-btn"),tableBody:document.querySelector(".deliveries-table-body"),deliveriesTime:document.querySelector(".deliveries-form-time-js"),updateDeliverySelect:document.querySelector(".update-delivery-select-js"),inputContainer:document.querySelector(".input-container"),updateDeliveryForm:document.querySelector(".modal-update-delivery-form-js")},p=()=>{const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},y=()=>{setInterval(()=>{const e=new Date,t=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0");o.deliveriesTime.textContent=`${t}:${r}:${n}`},1e3)},d="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",v=e=>l.post(d,e).then(()=>{a.success({title:"Dodano dostawę!",position:"topRight",timeout:7e3})}).catch(t=>{a.error({message:t,position:"topRight",timeout:7e3})}),b=e=>l.delete(`${d}/${e}`).then(t=>{a.success({message:"Dostawa usunięta",position:"topRight",timeout:7e3}),console.log(t)}).catch(t=>{a.error({message:t,position:"topRight",timeout:7e3})}),c=()=>l.get(d),g=(e,t)=>l.put(`${d}/${t}`,e).then(r=>{a.success({message:"Korekta zrobiona",position:"topRight",timeout:7e3}),console.log(r)}).catch(r=>console.log(r)),u=e=>{const t=e.map(r=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${r.id}</td>
            <td class="deliveries-table-body-text">${r.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${r.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${r.supplier}</td>
            <td class="deliveries-table-body-text">${r.carrier}</td>
            <td class="deliveries-table-body-text">${r.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${r.pallets}</td>
            <td class="deliveries-table-body-text">${r.boxes}</td>
            <td class="deliveries-table-body-text">${r.pieces}</td>
            <td class="deliveries-table-body-text">${r.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${r.admissionDate}</td>
            <td class="deliveries-table-body-text">${r.admissionTime}</td>
            <td class="deliveries-table-body-text">${r.recipientFullName}</td>
            <td class="deliveries-table-body-text">${r.abroad}</td>
            <td class="deliveries-table-body-text">${r.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${r.comments}</td>
        </tr>
    `).join("");o.tableBody.insertAdjacentHTML("beforeend",t)},D=e=>{const t=document.createElement("input");t.type="text",t.name=e,t.placeholder="Wprowadź nowe dane",t.className="deliveries-form-input",o.inputContainer.appendChild(t)};document.addEventListener("DOMContentLoaded",async()=>{try{const{data:e}=await c();u(e);const t=e[e.length-1].deliveryNumber,[r,n,i]=t.split("/"),s=String(Number(r)+1).padStart(4,"0");o.deliveryNumber.textContent=s}catch(e){console.log(e)}});o.deliveryNumberYear.textContent=new Date().getFullYear();o.deliveriesDate.textContent=`${p()}`;y();o.userDeliveryDescr.addEventListener("input",()=>{const e=o.userDeliveryDescr.value.trim().toUpperCase();e.includes("TERMINALE_INGENICO_")&&(o.incShipID.disabled=!1),e==="TERMINALE_INGENICO_ZWROT"&&(o.incShipID.disabled=!0)});const f=async e=>{try{e.preventDefault();const t={supplier:e.target.elements.supplier.value.trim().toLowerCase(),abroad:e.target.elements.abroad.value.trim().toLowerCase(),carrier:e.target.elements.carrier.value.trim().toLowerCase(),deliveryNumber:o.fullDeliveryNo.textContent.trim(),deliveryDescr:e.target.elements["delivery-descr"].value.trim().toLowerCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toLowerCase(),admissionDate:o.deliveriesDate.textContent,admissionTime:o.deliveriesTime.textContent,recipientFullName:o.recipientName.textContent.toLowerCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toLowerCase(),comments:e.target.elements.comments.value.trim().toLowerCase()};await v(t);const{data:r}=await c(),n=Number(r[r.length-1].id)+1;o.deliveryNumber.textContent=String(n).padStart(4,"0");const i=[];i.push(t),i[0].id=n-1,u(i),o.incShipID.disabled=!0,o.deliveryForm.reset()}catch(t){console.log(t)}},S=async e=>{try{e.preventDefault();const t=e.target.elements["delivery-id"].value;b(t),o.tableBody.innerHTML="";const{data:r}=await c();u(r),o.deleteDeliveryForm.reset()}catch(t){console.log(t)}},h=e=>{const t=e.target.value;D(t)},N=async e=>{try{e.preventDefault();const t=new FormData(e.target),r={};t.forEach((i,s)=>{r[s]=i}),await g(r,r["update-delivery-id"]),o.tableBody.innerHTML="";const{data:n}=await c();u(n),o.updateDeliveryOverlay.classList.toggle("is-open"),o.inputContainer.innerHTML="",o.updateDeliveryForm.reset()}catch(t){console.log(t)}};o.deliveryForm.addEventListener("submit",f);o.deleteDeliveryForm.addEventListener("submit",S);o.updateDeliveryBtn.addEventListener("click",()=>{o.updateDeliveryOverlay.classList.toggle("is-open")});o.modalWindowCloseBtn.addEventListener("click",()=>{o.updateDeliveryOverlay.classList.toggle("is-open")});o.updateDeliverySelect.addEventListener("change",h);o.updateDeliveryForm.addEventListener("submit",N);
//# sourceMappingURL=index.js.map
