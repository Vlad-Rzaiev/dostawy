import{a as d,i as a}from"./assets/vendor-BfXKUa_G.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const b=document.querySelector(".deliveries-form-time-js"),D=()=>{const e=new Date,r=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${r}-${o}-${t}`},S=()=>{setInterval(()=>{const e=new Date,r=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),t=String(e.getSeconds()).padStart(2,"0");b.textContent=`${r}:${o}:${t}`},1e3)},c="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",h=e=>d.post(c,e).then(()=>{a.success({title:"Dodano dostawę!",position:"topRight",timeout:7e3})}).catch(r=>{a.error({message:r,position:"topRight",timeout:7e3})}),x=e=>d.delete(`${c}/${e}`).then(r=>{a.success({message:"Dostawa usunięta",position:"topRight",timeout:7e3})}).catch(r=>{a.error({message:r,position:"topRight",timeout:7e3})}),u=()=>d.get(c),m=e=>{const r=document.querySelector(".deliveries-table-body"),o=e.map(t=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${t.id}</td>
            <td class="deliveries-table-body-text">${t.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${t.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${t.supplier}</td>
            <td class="deliveries-table-body-text">${t.carrier}</td>
            <td class="deliveries-table-body-text">${t.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${t.pallets}</td>
            <td class="deliveries-table-body-text">${t.boxes}</td>
            <td class="deliveries-table-body-text">${t.pieces}</td>
            <td class="deliveries-table-body-text">${t.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${t.admissionDate}</td>
            <td class="deliveries-table-body-text">${t.admissionTime}</td>
            <td class="deliveries-table-body-text">${t.recipientFullName}</td>
            <td class="deliveries-table-body-text">${t.abroad}</td>
            <td class="deliveries-table-body-text">${t.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${t.comments}</td>
        </tr>
    `).join("");r.insertAdjacentHTML("beforeend",o)},y=document.querySelector(".deliveries-form-js"),N=document.querySelector(".delivery-no-number"),C=document.querySelector(".delivery-no-year"),v=document.querySelector(".deliveries-form-date-js"),$=document.querySelector(".full-delivery-no-js"),L=document.querySelector(".recipient-name-user-login"),p=document.querySelector(".delivery-descr-js"),g=document.querySelector(".delete-delivery-form-js"),q=document.querySelector(".deliveries-table-body"),n=document.querySelector(".inc-ship-id"),w=document.querySelector(".update-delivery-btn"),f=document.querySelector(".update-delivery-overlay"),E=document.querySelector(".modal-window-close-btn");document.addEventListener("DOMContentLoaded",async()=>{try{const{data:e}=await u();m(e);const r=e[e.length-1].deliveryNumber,[o,t,s]=r.split("/"),i=String(Number(o)+1).padStart(4,"0");N.textContent=i}catch(e){console.log(e)}});C.textContent=new Date().getFullYear();v.textContent=`${D()}`;S();p.addEventListener("input",()=>{const e=p.value.trim().toUpperCase();e.includes("TERMINALE_INGENICO_")?n.disabled=!1:n.disabled=!0,e.includes("TERMINALE_INGENICO_ZWROT")&&(n.disabled=!0)});const I=async e=>{try{e.preventDefault();const r={supplier:e.target.elements.supplier.value.trim().toUpperCase(),abroad:e.target.elements.abroad.value.trim().toUpperCase(),carrier:e.target.elements.carrier.value.trim().toUpperCase(),deliveryNumber:$.textContent.trim(),deliveryDescr:e.target.elements["delivery-descr"].value.trim().toUpperCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toUpperCase(),admissionDate:v.textContent,admissionTime:b.textContent,recipientFullName:L.textContent.toUpperCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toUpperCase(),comments:e.target.elements.comments.value.trim().toUpperCase()};h(r);const{data:o}=await u(),t=Number(o[o.length-1].id)+1,s=[];s.push(r),s[0].id=t,m(s),n.disabled=!0,y.reset()}catch(r){console.log(r)}},O=async e=>{try{e.preventDefault();const r=e.target.elements["delivery-id"].value;x(r),q.innerHTML="";const{data:o}=await u();m(o),g.reset()}catch(r){console.log(r)}};y.addEventListener("submit",I);g.addEventListener("submit",O);w.addEventListener("click",()=>{f.classList.add("is-open")});E.addEventListener("click",()=>{f.classList.remove("is-open")});
//# sourceMappingURL=index.js.map
