import{a as c,i as l}from"./assets/vendor-CMANYCon.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();const i={deliveryForm:document.querySelector(".deliveries-form-js"),deliveryNumber:document.querySelector(".delivery-no-number"),deliveryNumberYear:document.querySelector(".delivery-no-year"),deliveriesDate:document.querySelector(".deliveries-form-date-js"),fullDeliveryNo:document.querySelector(".full-delivery-no-js"),recipientName:document.querySelector(".recipient-name-user-login"),userDeliveryDescr:document.querySelector(".delivery-descr-js"),deleteDeliveryForm:document.querySelector(".delete-delivery-form-js"),tableBody:document.querySelector(".deliveries-table-body"),incShipID:document.querySelector(".inc-ship-id"),updateDeliveryBtn:document.querySelector(".update-delivery-btn"),updateDeliveryOverlay:document.querySelector(".update-delivery-overlay"),modalWindowCloseBtn:document.querySelector(".modal-window-close-btn"),tableBody:document.querySelector(".deliveries-table-body"),deliveriesTime:document.querySelector(".deliveries-form-time-js"),updateDeliverySelect:document.querySelector(".update-delivery-select-js"),inputContainer:document.querySelector(".input-container"),updateDeliveryForm:document.querySelector(".modal-update-delivery-form-js"),moreShipingNoteBtn:document.querySelector(".js-more-shiping-note-btn"),loadMoreBtn:document.querySelector(".load-more-btn-js")},x=()=>{const e=new Date,r=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${t}-${r}`},w=()=>{setInterval(()=>{const e=new Date,r=String(e.getHours()).padStart(2,"0"),t=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");i.deliveriesTime.textContent=`${r}:${t}:${s}`},1e3)},p="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",C=e=>c.post(p,e).then(()=>{l.success({title:"Dodano dostawę!",position:"topRight",timeout:1e4})}).catch(r=>{l.error({message:r,position:"topRight",timeout:1e4})}),L=e=>c.delete(`${p}/${e}`).then(r=>{l.success({message:"Dostawa usunięta",position:"topRight",timeout:1e4}),console.log(r)}).catch(r=>{l.error({message:r,position:"topRight",timeout:1e4})}),I=(e,r)=>c.put(`${p}/${r}`,e).then(t=>{l.success({message:"Korekta zrobiona",position:"topRight",timeout:1e4}),console.log(t)}).catch(t=>console.log(t)),y=()=>c.get(p),u=e=>{const r=new URL("https://6788090fc4a42c9161091efe.mockapi.io/deliveries");return r.searchParams.append("sortBy","deliveryNumber"),r.searchParams.append("order","desc"),r.searchParams.append("page",e),r.searchParams.append("limit",12),c.get(r)},$={updateSupplier:"dostawca",updateAbroad:"zagranica",updateCarrier:"Przewożnik",updateDeliveryNumber:"Numer dostawy",updateDeliveryDescr:"Opis dostawy",updateIncomingShipmentID:"incoming shipment id",updatePallets:"palety",updateBoxes:"kartony",updatePieces:"sztuki",updateShipingNoteNumber:"numer listu przesyłki",updateAdmissionDate:"data przyjęcia",updateAdmissionTime:"godzina przyjęcia",updateInvoiceNumber:"numer faktury",updateComments:"uwagi"},B={updateSupplier:"text",updateAbroad:"text",updateCarrier:"text",updateDeliveryNumber:"text",updateDeliveryDescr:"text",updateIncomingShipmentID:"number",updatePallets:"number",updateBoxes:"number",updatePieces:"number",updateShipingNoteNumber:"text",updateAdmissionDate:"text",updateAdmissionTime:"text",updateInvoiceNumber:"text",updateComments:"text"},m=e=>{const r=e.map(t=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${t.id}</td>
            <td class="deliveries-table-body-text">${t.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${t.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${t.supplier}</td>
            <td class="deliveries-table-body-text">${t.carrier}</td>
            <td class="deliveries-table-body-text">${t.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${t.pallets}</td>
            <td class="deliveries-table-body-text">${t.boxes}</td>
            <td class="deliveries-table-body-text">${t.pieces}</td>
            <td class="deliveries-table-body-text">${t.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${t.admissionDate}</td>
            <td class="deliveries-table-body-text">${t.admissionTime}</td>
            <td class="deliveries-table-body-text">${t.recipientFullName}</td>
            <td class="deliveries-table-body-text">${t.abroad}</td>
            <td class="deliveries-table-body-text">${t.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${t.comments}</td>
        </tr>
    `).join("");i.tableBody.insertAdjacentHTML("beforeend",r)},E=e=>{const r=document.createElement("input"),t=document.createElement("label");t.htmlFor=e,t.className="deliveries-form-label",t.textContent=$[e]||e,r.type=B[e]||e,r.name=e,r.id=e,r.placeholder="Wprowadź nowe dane",r.className="deliveries-form-input",i.inputContainer.appendChild(t),i.inputContainer.appendChild(r)},T=()=>i.loadMoreBtn.style.display="none",b=()=>i.loadMoreBtn.style.display="block";let d=1;const F=async()=>{d++;const{data:e}=await u(d);m(e),e.length<12&&(T(),l.info({message:"Doszedleś do końca listy.",position:"topRight",timeout:1e4}))};document.addEventListener("DOMContentLoaded",async()=>{try{const{data:e}=await y(),r=e[e.length-1].deliveryNumber,[t,s,a]=r.split("/"),o=String(Number(t)+1).padStart(4,"0");i.deliveryNumber.textContent=o;const n=await u(d);i.tableBody.innerHTML="",m(n.data)}catch(e){console.log(e)}});const g=new Date().getFullYear();i.deliveryNumberYear.textContent=g;i.deliveriesDate.textContent=`${x()}`;w();i.userDeliveryDescr.addEventListener("input",()=>{const e=i.userDeliveryDescr.value.trim().toUpperCase();e.includes("TERMINALE_INGENICO_")?i.incShipID.disabled=!1:i.incShipID.disabled=!0,e==="TERMINALE_INGENICO_ZWROT"&&(i.incShipID.disabled=!0)});const q=async e=>{try{e.preventDefault();const{data:r}=await y(),t=r[r.length-1].deliveryNumber,[s,a,o]=t.split("/"),n=`${String(Number(s)+1).padStart(4,"0")}/${g}/D`,D={supplier:e.target.elements.supplier.value.trim().toLowerCase(),abroad:e.target.elements.abroad.value.trim().toLowerCase(),carrier:e.target.elements.carrier.value.trim().toLowerCase(),deliveryNumber:n,deliveryDescr:e.target.elements["delivery-descr"].value.trim().toLowerCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toLowerCase(),admissionDate:i.deliveriesDate.textContent,admissionTime:i.deliveriesTime.textContent,recipientFullName:i.recipientName.textContent.toLowerCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toLowerCase(),comments:e.target.elements.comments.value.trim().toLowerCase()};await C(D);const{data:v}=await y(),h=v[v.length-1].deliveryNumber,[S,A,O]=h.split("/"),N=String(Number(S)+1).padStart(4,"0");i.deliveryNumber.textContent=N,i.incShipID.disabled=!0,d=1;const f=await u(d);i.tableBody.innerHTML="",m(f.data),b(),i.deliveryForm.reset()}catch(r){console.log(r)}},M=async e=>{try{e.preventDefault();const r=e.target.elements["delivery-id"].value;await L(r),d=1;const{data:t}=await u(d);i.tableBody.innerHTML="",m(t),b(),i.deleteDeliveryForm.reset()}catch(r){console.log(r)}},P=e=>{const r=e.target.value;r&&E(r);function t(){i.updateDeliverySelect.value="",i.updateDeliverySelect.selectedIndex=0}setTimeout(t,500)},k=async e=>{try{e.preventDefault();const r=new FormData(e.target),t={};r.forEach((o,n)=>{t[n]=o});const s={supplier:t.updateSupplier,abroad:t.updateAbroad,carrier:t.updateCarrier,deliveryNumber:t.updateDeliveryNumber,deliveryDescr:t.updateDeliveryDescr,incomingShipmentID:t.updateIncomingShipmentID,pallets:t.updatePallets,boxes:t.updateBoxes,pieces:t.updatePieces,shipingNoteNumber:t.updateShipingNoteNumber,admissionDate:t.updateAdmissionDate,admissionTime:t.updateAdmissionTime,invoiceNumber:t.updateInvoiceNumber,comments:t.updateComments};await I(s,t["update-delivery-id"]),i.tableBody.innerHTML="",d=1;const{data:a}=await u(d);m(a),i.updateDeliveryOverlay.classList.toggle("is-open"),i.inputContainer.innerHTML="",b(),i.updateDeliveryForm.reset()}catch(r){console.log(r)}};i.deliveryForm.addEventListener("submit",q);i.deleteDeliveryForm.addEventListener("submit",M);i.updateDeliveryBtn.addEventListener("click",()=>i.updateDeliveryOverlay.classList.toggle("is-open"));i.modalWindowCloseBtn.addEventListener("click",()=>i.updateDeliveryOverlay.classList.toggle("is-open"));i.updateDeliverySelect.addEventListener("change",P);i.updateDeliveryForm.addEventListener("submit",k);i.loadMoreBtn.addEventListener("click",F);i.moreShipingNoteBtn.addEventListener("click",()=>{console.log("hello")});
//# sourceMappingURL=index.js.map
