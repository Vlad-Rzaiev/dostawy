import{a as d,i as n}from"./assets/vendor-BfXKUa_G.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const i={deliveryForm:document.querySelector(".deliveries-form-js"),deliveryNumber:document.querySelector(".delivery-no-number"),deliveryNumberYear:document.querySelector(".delivery-no-year"),deliveriesDate:document.querySelector(".deliveries-form-date-js"),fullDeliveryNo:document.querySelector(".full-delivery-no-js"),recipientName:document.querySelector(".recipient-name-user-login"),userDeliveryDescr:document.querySelector(".delivery-descr-js"),deleteDeliveryForm:document.querySelector(".delete-delivery-form-js"),tableBody:document.querySelector(".deliveries-table-body"),incShipID:document.querySelector(".inc-ship-id"),updateDeliveryBtn:document.querySelector(".update-delivery-btn"),updateDeliveryOverlay:document.querySelector(".update-delivery-overlay"),modalWindowCloseBtn:document.querySelector(".modal-window-close-btn"),tableBody:document.querySelector(".deliveries-table-body"),deliveriesTime:document.querySelector(".deliveries-form-time-js"),updateDeliverySelect:document.querySelector(".update-delivery-select-js"),inputContainer:document.querySelector(".input-container"),updateDeliveryForm:document.querySelector(".modal-update-delivery-form-js")},v=()=>{const e=new Date,r=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${t}-${r}`},b=()=>{setInterval(()=>{const e=new Date,r=String(e.getHours()).padStart(2,"0"),t=String(e.getMinutes()).padStart(2,"0"),s=String(e.getSeconds()).padStart(2,"0");i.deliveriesTime.textContent=`${r}:${t}:${s}`},1e3)},c="https://6788090fc4a42c9161091efe.mockapi.io/deliveries",g=e=>d.post(c,e).then(()=>{n.success({title:"Dodano dostawę!",position:"topRight",timeout:7e3})}).catch(r=>{n.error({message:r,position:"topRight",timeout:7e3})}),D=e=>d.delete(`${c}/${e}`).then(r=>{n.success({message:"Dostawa usunięta",position:"topRight",timeout:7e3}),console.log(r)}).catch(r=>{n.error({message:r,position:"topRight",timeout:7e3})}),u=()=>d.get(c),f=(e,r)=>d.put(`${c}/${r}`,e).then(t=>{n.success({message:"Korekta zrobiona",position:"topRight",timeout:7e3}),console.log(t)}).catch(t=>console.log(t)),S={updateSupplier:"dostawca",updateAbroad:"zagranica",updateCarrier:"Przewożnik",updateDeliveryNumber:"Numer dostawy",updateDeliveryDescr:"Opis dostawy",updateIncomingShipmentID:"incoming shipment id",updatePallets:"palety",updateBoxes:"kartony",updatePieces:"sztuki",updateShipingNoteNumber:"numer listu przesyłki",updateAdmissionDate:"data przyjęcia",updateAdmissionTime:"godzina przyjęcia",updateInvoiceNumber:"numer faktury",updateComments:"uwagi"},h={updateSupplier:"text",updateAbroad:"text",updateCarrier:"text",updateDeliveryNumber:"text",updateDeliveryDescr:"text",updateIncomingShipmentID:"number",updatePallets:"number",updateBoxes:"number",updatePieces:"number",updateShipingNoteNumber:"text",updateAdmissionDate:"text",updateAdmissionTime:"text",updateInvoiceNumber:"text",updateComments:"text"},m=e=>{const r=e.map(t=>`
        <tr class="deliveries-table-body-row">
            <td class="deliveries-table-body-text">${t.id}</td>
            <td class="deliveries-table-body-text">${t.deliveryNumber}</td>
            <td class="deliveries-table-body-text">${t.deliveryDescr}</td>
            <td class="deliveries-table-body-text">${t.supplier}</td>
            <td class="deliveries-table-body-text">${t.carrier}</td>
            <td class="deliveries-table-body-text">${t.shipingNoteNumber}</td>
            <td class="deliveries-table-body-text">${t.pallets}</td>
            <td class="deliveries-table-body-text">${t.boxes}</td>
            <td class="deliveries-table-body-text">${t.pieces}</td>
            <td class="deliveries-table-body-text">${t.incomingShipmentID}</td>
            <td class="deliveries-table-body-text">${t.admissionDate}</td>
            <td class="deliveries-table-body-text">${t.admissionTime}</td>
            <td class="deliveries-table-body-text">${t.recipientFullName}</td>
            <td class="deliveries-table-body-text">${t.abroad}</td>
            <td class="deliveries-table-body-text">${t.invoiceNumber}</td>
            <td class="deliveries-table-body-text">${t.comments}</td>
        </tr>
    `).join("");i.tableBody.insertAdjacentHTML("beforeend",r)},N=e=>{const r=document.createElement("input"),t=document.createElement("label");t.htmlFor=e,t.className="deliveries-form-label",t.textContent=S[e]||e,r.type=h[e],r.name=e,r.id=e,r.placeholder="Wprowadź nowe dane",r.className="deliveries-form-input",i.inputContainer.appendChild(t),i.inputContainer.appendChild(r)};document.addEventListener("DOMContentLoaded",async()=>{try{const{data:e}=await u();m(e);const r=e[e.length-1].deliveryNumber,[t,s,o]=r.split("/"),a=String(Number(t)+1).padStart(4,"0");i.deliveryNumber.textContent=a}catch(e){console.log(e)}});i.deliveryNumberYear.textContent=new Date().getFullYear();i.deliveriesDate.textContent=`${v()}`;b();i.userDeliveryDescr.addEventListener("input",()=>{const e=i.userDeliveryDescr.value.trim().toUpperCase();e.includes("TERMINALE_INGENICO_")&&(i.incShipID.disabled=!1),e==="TERMINALE_INGENICO_ZWROT"&&(i.incShipID.disabled=!0)});const x=async e=>{try{e.preventDefault();const r={supplier:e.target.elements.supplier.value.trim().toLowerCase(),abroad:e.target.elements.abroad.value.trim().toLowerCase(),carrier:e.target.elements.carrier.value.trim().toLowerCase(),deliveryNumber:i.fullDeliveryNo.textContent.trim(),deliveryDescr:e.target.elements["delivery-descr"].value.trim().toLowerCase(),incomingShipmentID:e.target.elements["incoming-shipment-id"].value,pallets:e.target.elements.pallets.value,boxes:e.target.elements.boxes.value,pieces:e.target.elements.pieces.value,shipingNoteNumber:e.target.elements["shiping-note-number"].value.trim().toLowerCase(),admissionDate:i.deliveriesDate.textContent,admissionTime:i.deliveriesTime.textContent,recipientFullName:i.recipientName.textContent.toLowerCase(),invoiceNumber:e.target.elements["invoice-num"].value.trim().toLowerCase(),comments:e.target.elements.comments.value.trim().toLowerCase()};await g(r);const{data:t}=await u(),s=Number(t[t.length-1].id)+1;i.deliveryNumber.textContent=String(s).padStart(4,"0");const o=t[t.length-1].deliveryNumber,[a,l,$]=o.split("/"),y=String(Number(a)+1).padStart(4,"0");i.deliveryNumber.textContent=y;const p=[];p.push(r),p[0].id=s-1,m(p),i.incShipID.disabled=!0,i.deliveryForm.reset()}catch(r){console.log(r)}},C=async e=>{try{e.preventDefault();const r=e.target.elements["delivery-id"].value;D(r),i.tableBody.innerHTML="";const{data:t}=await u();m(t),i.deleteDeliveryForm.reset()}catch(r){console.log(r)}},w=e=>{const r=e.target.value;r&&N(r)},L=async e=>{try{e.preventDefault();const r=new FormData(e.target),t={};r.forEach((o,a)=>{t[a]=o}),await f(t,t["update-delivery-id"]),i.tableBody.innerHTML="";const{data:s}=await u();m(s),i.updateDeliveryOverlay.classList.toggle("is-open"),i.inputContainer.innerHTML="",i.updateDeliveryForm.reset()}catch(r){console.log(r)}};i.deliveryForm.addEventListener("submit",x);i.deleteDeliveryForm.addEventListener("submit",C);i.updateDeliveryBtn.addEventListener("click",()=>{i.updateDeliveryOverlay.classList.toggle("is-open")});i.modalWindowCloseBtn.addEventListener("click",()=>{i.updateDeliveryOverlay.classList.toggle("is-open")});i.updateDeliverySelect.addEventListener("change",w);i.updateDeliveryForm.addEventListener("submit",L);
//# sourceMappingURL=index.js.map
