{"version":3,"file":"index.js","sources":["../src/js/time-functions.js","../src/js/mockapi.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["export const deliveriesTime = document.querySelector(\n  '.deliveries-form-time-js'\n);\n\nexport const getCurrentDate = () => {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\n  const day = String(currentDate.getDate()).padStart(2, '0');\n  const date = `${year}-${month}-${day}`;\n\n  return date;\n};\n\nexport const getCurrentTime = () => {\n  setInterval(() => {\n    const currentDate = new Date();\n    const hours = String(currentDate.getHours()).padStart(2, '0');\n    const minutes = String(currentDate.getMinutes()).padStart(2, '0');\n    const seconds = String(currentDate.getSeconds()).padStart(2, '0');\n\n    deliveriesTime.textContent = `${hours}:${minutes}:${seconds}`;\n  }, 1000);\n};\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_URL = 'https://6788090fc4a42c9161091efe.mockapi.io/deliveries';\n\nexport const addDelivery = userData => {\n  return axios\n    .post(API_URL, userData)\n    .then(() => {\n      iziToast.success({\n        title: 'Dodano dostawę!',\n        position: 'topRight',\n        timeout: 7000,\n      });\n    })\n    .catch(err => {\n      iziToast.error({\n        message: err,\n        position: 'topRight',\n        timeout: 7000,\n      });\n    });\n};\n\nexport const deleteDelivery = deliveryId => {\n  return axios\n    .delete(`${API_URL}/${deliveryId}`)\n    .then(response => {\n      iziToast.success({\n        message: 'Dostawa usunięta',\n        position: 'topRight',\n        timeout: 7000,\n      });\n    })\n    .catch(err => {\n      iziToast.error({\n        message: err,\n        position: 'topRight',\n        timeout: 7000,\n      });\n    });\n};\n\nexport const getData = () => {\n  return axios.get(API_URL);\n};\n\nexport const updateData = (dataForUpdate, id) => {\n  return axios.put(`${API_URL}/${id}`, dataForUpdate);\n};\n","export const renderMarkup = deliveries => {\n  const tableBody = document.querySelector('.deliveries-table-body');\n\n  const markup = deliveries\n    .map(\n      delivery => `\n        <tr class=\"deliveries-table-body-row\">\n            <td class=\"deliveries-table-body-text\">${delivery.id}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.deliveryNumber}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.deliveryDescr}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.supplier}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.carrier}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.shipingNoteNumber}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.pallets}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.boxes}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.pieces}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.incomingShipmentID}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.admissionDate}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.admissionTime}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.recipientFullName}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.abroad}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.invoiceNumber}</td>\n            <td class=\"deliveries-table-body-text\">${delivery.comments}</td>\n        </tr>\n    `\n    )\n    .join('');\n\n  tableBody.insertAdjacentHTML('beforeend', markup);\n};\n","import 'font-awesome/css/font-awesome.min.css';\nimport {\n  getCurrentDate,\n  getCurrentTime,\n  deliveriesTime,\n} from './js/time-functions.js';\nimport { addDelivery, deleteDelivery, getData } from './js/mockapi.js';\nimport { renderMarkup } from './js/render-function.js';\n\nconst deliveryForm = document.querySelector('.deliveries-form-js');\nconst deliveryNumber = document.querySelector('.delivery-no-number');\nconst deliveryNumberYear = document.querySelector('.delivery-no-year');\nconst deliveriesDate = document.querySelector('.deliveries-form-date-js');\nconst fullDeliveryNo = document.querySelector('.full-delivery-no-js');\nconst recipientName = document.querySelector('.recipient-name-user-login');\nconst userDeliveryDescr = document.querySelector('.delivery-descr-js');\nconst deleteDeliveryForm = document.querySelector('.delete-delivery-form-js');\nconst tableBody = document.querySelector('.deliveries-table-body');\nconst incShipID = document.querySelector('.inc-ship-id');\nconst updateDeliveryBtn = document.querySelector('.update-delivery-btn');\nconst updateDeliveryOverlay = document.querySelector(\n  '.update-delivery-overlay'\n);\nconst modalWindowCloseBtn = document.querySelector('.modal-window-close-btn');\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  try {\n    const { data } = await getData();\n    renderMarkup(data);\n\n    const lastDeliveryNumber = data[data.length - 1].deliveryNumber;\n    const [lastNumber, year, suffix] = lastDeliveryNumber.split('/');\n    const newNumber = String(Number(lastNumber) + 1).padStart(4, '0');\n    deliveryNumber.textContent = newNumber;\n  } catch (err) {\n    console.log(err);\n  }\n});\n\ndeliveryNumberYear.textContent = new Date().getFullYear();\n\ndeliveriesDate.textContent = `${getCurrentDate()}`;\ngetCurrentTime();\n\nuserDeliveryDescr.addEventListener('input', () => {\n  const deliveryDescrValue = userDeliveryDescr.value.trim().toUpperCase();\n\n  if (deliveryDescrValue.includes('TERMINALE_INGENICO_')) {\n    incShipID.disabled = false;\n  } else {\n    incShipID.disabled = true;\n  }\n  if (deliveryDescrValue.includes('TERMINALE_INGENICO_ZWROT')) {\n    incShipID.disabled = true;\n  }\n});\n\nconst onClickSubmitForm = async e => {\n  try {\n    e.preventDefault();\n\n    const userEntry = {\n      supplier: e.target.elements.supplier.value.trim().toUpperCase(),\n      abroad: e.target.elements.abroad.value.trim().toUpperCase(),\n      carrier: e.target.elements.carrier.value.trim().toUpperCase(),\n      deliveryNumber: fullDeliveryNo.textContent.trim(),\n      deliveryDescr: e.target.elements['delivery-descr'].value\n        .trim()\n        .toUpperCase(),\n      incomingShipmentID: e.target.elements['incoming-shipment-id'].value,\n      pallets: e.target.elements.pallets.value,\n      boxes: e.target.elements.boxes.value,\n      pieces: e.target.elements.pieces.value,\n      shipingNoteNumber: e.target.elements['shiping-note-number'].value\n        .trim()\n        .toUpperCase(),\n      admissionDate: deliveriesDate.textContent,\n      admissionTime: deliveriesTime.textContent,\n      recipientFullName: recipientName.textContent.toUpperCase(),\n      invoiceNumber: e.target.elements['invoice-num'].value\n        .trim()\n        .toUpperCase(),\n      comments: e.target.elements.comments.value.trim().toUpperCase(),\n    };\n\n    addDelivery(userEntry);\n\n    const { data } = await getData();\n    const newID = Number(data[data.length - 1].id) + 1;\n\n    const arr = [];\n    arr.push(userEntry);\n    arr[0].id = newID;\n    renderMarkup(arr);\n\n    incShipID.disabled = true;\n\n    deliveryForm.reset();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst onClickSubmitFormDelete = async e => {\n  try {\n    e.preventDefault();\n\n    const deleteID = e.target.elements['delivery-id'].value;\n    deleteDelivery(deleteID);\n\n    tableBody.innerHTML = '';\n\n    const { data } = await getData();\n    renderMarkup(data);\n\n    deleteDeliveryForm.reset();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\ndeliveryForm.addEventListener('submit', onClickSubmitForm);\ndeleteDeliveryForm.addEventListener('submit', onClickSubmitFormDelete);\n\nupdateDeliveryBtn.addEventListener('click', () => {\n  updateDeliveryOverlay.classList.add('is-open');\n});\nmodalWindowCloseBtn.addEventListener('click', () => {\n  updateDeliveryOverlay.classList.remove('is-open');\n});\n"],"names":["deliveriesTime","getCurrentDate","currentDate","year","month","day","getCurrentTime","hours","minutes","seconds","API_URL","addDelivery","userData","axios","iziToast","err","deleteDelivery","deliveryId","response","getData","renderMarkup","deliveries","tableBody","markup","delivery","deliveryForm","deliveryNumber","deliveryNumberYear","deliveriesDate","fullDeliveryNo","recipientName","userDeliveryDescr","deleteDeliveryForm","incShipID","updateDeliveryBtn","updateDeliveryOverlay","modalWindowCloseBtn","data","lastDeliveryNumber","lastNumber","suffix","newNumber","deliveryDescrValue","onClickSubmitForm","userEntry","newID","arr","onClickSubmitFormDelete","deleteID"],"mappings":"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"}